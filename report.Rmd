---
title: "Predicting House Prices"
author: "by Danking-team: Yuanchang Zhang, Junzhe Wang"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r load-lib, include = FALSE}
library(tidyverse)
library(tidymodels)
library(knitr)
library(kableExtra)
library(ggplot2)

```


```{r load-data, include=FALSE}
# load your data here and any pre-processing/cleaning 
#  that you need for your report.
data1 <- read_csv("data/train.csv")


data1 <- data1[, colMeans(is.na(data1)) <= 0.05]


data1_clean <- data1 %>% drop_na()


numeric_vars <- data1_clean %>% select(where(is.numeric))


cor_matrix <- cor(numeric_vars, use = "complete.obs")

top5_cor <- cor_matrix %>%
  as.data.frame.table() %>%
  filter(Var2 == "SalePrice",
         Var1 != "SalePrice") %>%
  mutate(abs_cor = abs(Freq)) %>%
  arrange(desc(abs_cor)) %>%
  head(5)

top_vars <- as.character(top5_cor$Var1)


data_model <- data1_clean %>%
  select(SalePrice, all_of(top_vars))


set.seed(28)
data_split <- initial_split(data_model, prop = 0.8)
data_train <- training(data_split)
data_test  <- testing(data_split)


```


## Research Question

In this project, we examine what drives house prices and build a model to predict property values. Our main aim is to identify which characteristics in the dataset matter most for sale prices, then concentrate on the five most significant ones.

This topic matters because when people—particularly students—search for housing, they usually need to weigh up different aspects like the property's size, its overall state, or where it's situated. All of these can influence the final price. By studying the data, we hope to answer several questions:

What factors show the strongest connection to house prices?
Which five elements impact SalePrice the most?
In what ways do these factors change the price?
Can we create a reliable model for estimating house prices?

Through this work, we want to better understand what pushes housing prices up or down and determine which property features deserve the most attention when calculating a home's market value.




## Data

The dataset used in this project comes from the Ames Housing dataset, which contains detailed information on house sales in Ames, Iowa. The data includes many features about each property, such as its size, quality, condition, and the final sale price. This dataset is commonly used for practising regression and prediction problems because it provides a wide range of variables that may affect house prices.

Some of the key variables we focus on in this project include:

SalePrice – the selling price of the house (our target variable)

OverallQual – overall quality rating of the materials and finish

GrLivArea – above-ground living area in square feet

GarageCars – the number of cars the garage can hold

GarageArea – total area of the garage in square feet

1stFlrSF – size of the first floor

These variables were identified as the top five most correlated with SalePrice in our analysis and will be used in the prediction model.



## Findings

1. Data Preparation and Selection of Key Predictors

After importing the dataset, our first step was to remove variables with more than 5% missing values and then drop the remaining incomplete rows. This produced a clean dataset suitable for modelling and helped ensure that the linear regression model would not be influenced by missing data.

To identify the most important predictors, we calculated correlations between all numeric variables and SalePrice. The five features most strongly associated with SalePrice were:

OverallQual (correlation: 0.7867)

GrLivArea (correlation: 0.7111)

GarageCars (correlation: 0.6418)

GarageArea (correlation: 0.6211)

1stFlrSF (correlation: 0.6148)

These correlations indicate that houses with better construction quality, more living space, and larger or more functional garages tend to command significantly higher prices. The strong correlations of OverallQual and GrLivArea also match findings from previous housing price research, which supports the reliability of our variable selection.

2. Visual Relationships Between Predictors and SalePrice

To better understand how these predictors relate to SalePrice, we created scatterplots with linear trend lines. The patterns were intuitive and consistent:

OverallQual vs SalePrice showed a steep upward trend, meaning buyers are willing to pay considerably more for higher-quality houses.

GrLivArea vs SalePrice displayed a strong, positive linear relationship, confirming that houses with more above-ground living space are typically more valuable.

GarageCars vs SalePrice also showed a positive trend, although with more variation, suggesting garage capacity influences price but not as strongly as overall quality or living space.

These visualisations reinforce that a linear model is a reasonable starting point for predicting SalePrice.

3. Building the Linear Regression Model

Using the five selected predictors, we fitted a linear regression model. The estimated coefficients were:

OverallQual: +25,293.62

GrLivArea: +45.02 per square foot

GarageCars: +13,999.99

GarageArea: +23.62 per square foot

1stFlrSF: +32.96 per square foot

These coefficients represent how much SalePrice is expected to change when each predictor increases by one unit, assuming the other variables remain constant. Several insights emerge:

OverallQual has the largest effect, adding more than $25,000 per additional quality point, showing that house quality is a major driver of value.

Living area variables (GrLivArea and 1stFlrSF) contribute meaningfully to price increases and reflect buyers’ preferences for spacious homes.

GarageCars has a stronger effect than GarageArea, highlighting that garage capacity matters more than square footage.

Together, these results suggest that buyers prioritise quality, space, and functional features when evaluating house prices.

4. Model Evaluation: Accuracy and Predictive Power

To assess the model’s performance, we applied it to the test dataset and computed two key metrics:

RMSE = 36,795.13

R² = 0.758

The RMSE of around $37k indicates the typical prediction error—the model’s predicted prices differ from the actual values by roughly this amount on average. Given the wide price range in the dataset, this is a reasonable error for a simple linear model.

The R² value of 0.758 means that about 75.8% of the variation in SalePrice is explained by the model. This suggests that the selected predictors capture most of the important patterns that influence house prices.

5. Model Diagnostics: Checking Assumptions

We examined diagnostic plots to ensure the validity of the linear model.

Predicted vs Actual: Most points fall close to the 45-degree line, showing that the model generally predicts prices accurately, with larger deviations mainly for very expensive homes.

Residuals vs Fitted: A slight funnel shape appears, suggesting increasing error for higher-priced houses. This is common in housing data.

QQ Plot of Residuals: Residuals mostly follow a straight line, indicating approximate normality, with small deviations at the tails.

Overall, the diagnostic plots show that the model assumptions are reasonably satisfied, and the model performs well for most observations.

6. Interpretation of Results

Taken together, the analysis highlights that quality and space are the most important determinants of housing prices. OverallQual is the strongest predictor, underscoring the role of building materials, craftsmanship, and finishing quality. Both GrLivArea and 1stFlrSF demonstrate the value buyers place on usable living space. Garage features also influence price, particularly the number of vehicles that can be stored.

These findings align well with real-world expectations: spacious, well-built homes with good functional features tend to sell for higher prices.

7. Conclusion

In conclusion, our project shows that a small and carefully selected set of variables can explain a substantial portion of the variation in house prices. The linear regression model performed effectively, identifying key contributors such as overall quality, living area, and garage capacity. Although more advanced modelling techniques could further improve predictive accuracy, this analysis provides a clear and meaningful understanding of the key factors influencing SalePrice.



## References

Kaggle. (2025). Retrieved from https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/data


